{% extends 'layout/base.html' %}

{% load static %}
{% load i18n %}

{% block extrahead %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static '/css/mdl-selectfield.min.css' %}" />
  <!-- link rel="stylesheet" href="{% static '/css/mdDateTimePicker.min.css' %}" / -->
{% endblock %}

{% block layout %}
<div class="mdl-layout mdl-js-layout">
    <main class="mdl-layout__content mdl-color--grey-100">
      <div class="mdl-grid chancen-content">
        <form method="post">
          {% csrf_token %}
          <div class="mdl-card mdl-shadow--6dp mdl-cell--12-col">
            <div class="mdl-card__title mdl-color--primary mdl-color-text--white relative">
                <h2 class="mdl-card__title-text">{% trans 'Complete your registration!' %}</h2>
            </div>
            
            <div class="mdl-card__supporting-text mdl-card--expand mdl-grid">
              <div class="mdl-cell mdl-cell--12-col">
                  <h4 class="mdl-typography--headline mdl-underlined mdl-underlined--1">{% trans 'Personal data' %}</h4>
              </div>
              <div class="mdl-cell mdl-cell--2-col">
                  {% include 'snippets/select.html' with field=form.salutation %}
              </div>
              <div class="mdl-cell mdl-cell--5-col">
                  {% include 'snippets/input.html' with field=form.first_name type='text' %}
              </div>
              <div class="mdl-cell mdl-cell--5-col">
                  {% include 'snippets/input.html' with field=form.last_name type='text' %}
              </div>

              <div class="mdl-cell">
                  {% include 'snippets/select.html' with field=form.gender %}
              </div>
              <div class="mdl-cell">
                  {% include 'snippets/select.html' with field=form.language %}
              </div>
              <div class="mdl-cell">
                  {% include 'snippets/select.html' with field=form.nationality %}
              </div>

              <div class="mdl-cell">
                  {% include 'snippets/input.html' with field=form.birth_city type='text' %}
              </div>
              <div class="mdl-cell">
                  {% include 'snippets/select.html' with field=form.birth_country %}
              </div>

              <div class="mdl-cell mdl-cell--12-col">
                  <h4 class="mdl-typography--headline mdl-underlined mdl-underlined--1">{% trans 'Contact data' %}</h4>
              </div>

              <div class="mdl-cell">
                  {% include 'snippets/input.html' with field=form.private_email type='email' %}
              </div>
              <div class="mdl-cell">
                  {% include 'snippets/input.html' with field=form.mobile_phone type='phone' %}
              </div>
              <div class="mdl-cell">
                  {% include 'snippets/input.html' with field=form.home_phone type='phone' %}
              </div>
              
              <div class="mdl-cell--8-col">
                  {% include 'snippets/address.html' with title=_('Home') street=form.mailing_street zip=form.mailing_zip city=form.mailing_city country=form.mailing_country %}
              </div>

              <div class="mdl-cell mdl-cell--12-col">
                  <h4 class="mdl-typography--headline mdl-underlined mdl-underlined--1">{% trans 'Billing data' %}</h4>
              </div>

              <div class="mdl-cell mdl-cell--top">
                  {% include 'snippets/select.html' with field=form.billing_option %}
              </div>
              
              <div class="mdl-cell--8-col">
                  {% include 'snippets/address.html' with title=_('Billing') street=form.billing_street zip=form.billing_zip city=form.billing_city country=form.billing_country %}
              </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
              <div class="mdl-grid">
                <input type="submit" class="mdl-cell mdl-cell--9-offset mdl-button mdl-button--raised mdl-button--colored mdl-js-button mdl-js-ripple-effect mdl-color-text--white" value="Submit">
              </div>
            </div>
          </div>
        </form>
      </div>
    </main>
</div>
{% endblock %}

{% block extrajs %}
  {{ block.super }}
  <script src="{% static '/js/mdl-selectfield.min.js' %}"></script>

  <!-- script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment-with-locales.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/rome/2.1.22/rome.js"></script>
  
  <script src="{% static '/js/mdDateTimePicker.min.js' %}"></script>

  <script defer>
  !function() {
    "use strict";
    const birth_date = document.querySelector('#id_birth_date');
    /*const bd_picker = new MaterialDatetimePicker()
      .on('submit', (val) => {
        birth_date.value = val.format("YYYY-MM-DD");
      });
    birth_date.addEventListener('focus', () => bd_picker.open());*/
    var dialog = new mdDateTimePicker.default({
      type: 'date',
      init: moment(birth_date.value),
      past: moment().subtract(50, 'years'),
      future: moment(),
      trigger: birth_date
    });
    birth_date.addEventListener('focus', function() {
      dialog.toggle();
    });
    birth_date.addEventListener('onOk', function(d) {
      this.value = dialog.time.format("YYYY-MM-DD");
    });
  }();
  </script -->

{% endblock %}
